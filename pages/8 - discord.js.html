<h1>discord.js</h1>
<p>In questo nuovo articolo inizieremo a sviluppare il nostro bot in JavaScript.</p>
<p>Per farlo utilizzeremo una libreria JavaScript chiamata <strong>discord.js</strong> che ci permetterà di interagire con DIscord facilmente.</p>
<p>Prima di iniziare, però, diamo uno sguardo agli ultimi strumenti che ci aiuteranno nello sviluppo del bot.</p>
<h2>Sommario</h2>
<ul>
<li><a href="#discordjs">discord.js</a>
<ul>
<li><a href="#sommario">Sommario</a></li>
<li><a href="#eslint">ESLint</a></li>
<li><a href="#prettier">Prettier</a></li>
<li><a href="#configurazione-ambiente-di-lavoro">Configurazione ambiente di lavoro</a>
<ul>
<li><a href="#creazione-della-cartella">Creazione della cartella</a></li>
<li><a href="#installazione-visual-studio-code">Installazione Visual Studio Code</a></li>
<li><a href="#installazione-estensioni">Installazione estensioni</a></li>
<li><a href="#configurazione-visual-studio-code">Configurazione Visual Studio Code</a></li>
<li><a href="#utilizzo-vscode">Utilizzo VSCode</a></li>
<li><a href="#installazione-nodejs">Installazione Node.js</a></li>
<li><a href="#creazione-file-per-gli-strumenti">Creazione file per gli strumenti</a>
<ul>
<li><a href="#typescript">Typescript</a></li>
<li><a href="#eslint-1">ESLint</a></li>
<li><a href="#prettier-1">Prettier</a></li>
</ul></li>
</ul></li>
<li><a href="#creazione-progetto">Creazione progetto</a></li>
<li><a href="#npm">npm</a></li>
<li><a href="#installazione-moduli">Installazione moduli</a></li>
<li><a href="#creazione-bot">Creazione bot</a></li>
<li><a href="#invitare-il-bot-nel-nostro-server">Invitare il bot nel nostro server</a></li>
<li><a href="#indexjs">index.js</a></li>
</ul></li>
</ul>
<h2>ESLint</h2>
<p>Questo tool ci è molto utile per segnalare errori diversi da quelli di sintassi o del TypeScript, ma ci danno consigli riguardo il nostro codice.</p>
<p>Ad esempio, <strong><a href="https://eslint.org">ESLint</a></strong> ci avverte se utilizziamo <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">==</code> per un’uguaglianza dove sarebbe meglio usare <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">===</code> e può essere personalizzato per modificare lo stile del nostro codice, come omettere le parentesi graffe in un blocco, come un <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">if</code> dove eseguiamo una sola azione ed è facoltativo inserirle, oppure usare delle condizioni inutili, etc…</p>
<p>Anche questo strumento ha bisogno di un file di configurazione, successivamente vedremo nel dettaglio la configurazione del nostro ambiente di sviluppo ma, se volete dare un’occhiata, utilizzeremo la configurazione che si trova nel file <a href="/.eslintrc.json"><code style="padding: 3px 5px; background: #f0f0f0; color: #444;">.eslintrc.json</code></a>.</p>
<p>Ecco un’immagine per darvi un’idea su come funziona eslint:</p>
<p><img src="../images/8/eslint.png" alt="ESLint" /></p>
<hr />
<h2>Prettier</h2>
<p>L’ultimo strumento che utilizzeremo è <strong><a href="https://prettier.io">Prettier</a></strong> che semplicemente farà da <em>formattatore</em> del nostro codice, ossia lo renderà più facile da leggere e più bello.</p>
<p>Anche Prettier ha bisogno di un file di configurazione ma estremamente più semplice e potete trovarlo in <a href=".prettierrc.json"><code style="padding: 3px 5px; background: #f0f0f0; color: #444;">.prettierrc.json</code></a>.</p>
<p>Per rendervi un’idea del funzionamento di prettier ecco la differenza tra un codice prima e dopo essere stato (automaticamente) formattato.</p>
<p><strong>Prima:</strong></p>
<p><img src="../images/8/prettier-prima.png" alt="Prettier-prima" /></p>
<p><strong>Dopo:</strong></p>
<p><img src="../images/8/prettier-dopo.png" alt="Prettier-dopo" /></p>
<hr />
<h2>Configurazione ambiente di lavoro</h2>
<p>Ora che abbiamo descritto gli ultimi strumenti, è arrivato il momento di creare l’ambiente di lavoro per il nostro bot.</p>
<h3>Creazione della cartella</h3>
<p>La prima cosa da fare è creare una cartella dove rimarrà il nostro codice.
Possiamo chiamarla come vogliamo, ma sarebbe preferibile usare il nome che daremo al nostro bot.</p>
<p>Posizionate questa cartella nel Desktop, o dovunque siete più comodi; non avremo comunque bisogno di aprirla molte volte, in quanto utilizzeremo direttamente Visual Studio Code.</p>
<hr />
<h3>Installazione Visual Studio Code</h3>
<p>Se non l’avete già fatto, è arrivata l’ora di installare <strong>Visual Studio Code</strong>.</p>
<p>In base ai requisiti del vostro sistema, troverete il file da installare che fa per voi sul <a href="https://code.visualstudio.com/download">sito ufficiale</a>.</p>
<p>Se avete privilegi da amministratore nel vostro utente, potete scegliere <em>system installer</em>, ma <em>user installer</em> andrà benissimo ugualmente (cambiano solo i permessi garantiti all’applicazione).</p>
<hr />
<h3>Installazione estensioni</h3>
<p>Ora possiamo installare le estensioni necessarie per il nostro progetto.</p>
<p>Di seguito ne è una lista con i rispettivi link per l’installazione:</p>
<ul>
<li><strong><a href="https://marketplace.visualstudio.com/items?itemName=aaron-bond.better-comments">Better Comments</a></strong> - Per rendere facile interagire con i commenti che ci serviranno per Typescript;</li>
<li><strong><a href="https://marketplace.visualstudio.com/items?itemName=dbaeumer.vscode-eslint">ESLint</a></strong> - Ci permetterà di vedere gli errori segnalati di ESLint nell’editor;</li>
<li><strong><a href="https://marketplace.visualstudio.com/items?itemName=eg2.vscode-npm-script">npm</a></strong> - Ci faciliterà l’esecuzione dei comandi per eseguire il nostro bot e ci fornirà avvisi riguardo ai nostri moduli;</li>
<li><strong><a href="https://marketplace.visualstudio.com/items?itemName=christian-kohler.npm-intellisense">npm Intellisense</a></strong> - Ci fornirà dei consigli quando vorremo importare un modulo (come discord.js etc…);</li>
<li><strong><a href="https://marketplace.visualstudio.com/items?itemName=esbenp.prettier-vscode">Prettier</a></strong> - Installerà Prettier e lo renderà disponibile come formattatore;</li>
<li><strong><a href="https://marketplace.visualstudio.com/items?itemName=VisualStudioExptTeam.vscodeintellicode">Visual Studio Intellicode</a></strong> - Ci fornirà consigli più intelligenti riguardo al nostro codice.</li>
</ul>
<hr />
<h3>Configurazione Visual Studio Code</h3>
<p>Adesso possiamo modificare alcune impostazioni di Visual Studio Code e installare le estensioni necessarie.</p>
<p><strong>Nota: non siete obbligati a cambiare queste impostazioni ma ci possono essere utili per programmare più facilmente!</strong></p>
<p>Per cambiare le impostazioni cliccate il simbolo dell’ingranaggio in basso a sinistra e poi <strong>Settings</strong>:</p>
<p><img src="../images/8/settings.png" alt="Settings" /></p>
<p>Ecco le impostazioni che modificheremo (le potete trovare direttamente all’inizio della pagina impostazioni o cercarle tramite nome nella barra in alto):</p>
<ul>
<li><strong>Files - Auto Save</strong>: <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">onFocusChange</code> - Salverà automaticamente il file quando clicchiamo fuori di esso;</li>
<li><strong>Editor - Font Size</strong>: <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">15</code> - Ingrandirà leggermente (da 14) i caratteri, in modo più visibile;</li>
<li><strong>Editor - Cursor Style</strong>: <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">line-thin</code> - Renderà il cursore leggermente più sottile;</li>
<li><strong>Editor - Tab Size</strong>: <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">2</code> - Questo è il numero di spazi equivalenti ad un <strong>Tab</strong>;</li>
<li><strong>Editor - Insert Spaces</strong>: <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">off</code> - Non convertirà i tabs in spazi;</li>
<li><strong>Editor - Detect Indentation</strong>: <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">off</code> - Ci permetterà di usare <strong>Tab Size</strong> e <strong>Insert Spaces</strong>;</li>
<li><strong>Editor - Format On Paste</strong>: <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">on</code> - Formatterà automaticamente il file se incolliamo del nuovo codice;</li>
<li><strong>Editor - Format On Type</strong>: <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">on</code> - Formatterà automaticamente il file se eseguiamo azioni come inserire un punto e virgola o andiamo a capo;</li>
<li><strong>Editor - Format On Save</strong>: <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">on</code> - Formatterà automaticamente il file al suo salvataggio;</li>
<li><strong>Editor - Default Formatter</strong>: <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">prettier</code> - Sceglierà Prettier come formattatore di default per i nostri file;</li>
<li><strong>Editor - Suggest Selection</strong>: <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">recentlyUsedByPrefix</code> - Ordinerà i suggerimenti di Intellisense secondo quelli utilizzati più di recente e se il nostro testo corrisponde a quello utilizzato in altri casi con quel suggerimento.</li>
</ul>
<hr />
<h3>Utilizzo VSCode</h3>
<p><strong>Visual Studio Code</strong> (o <strong>VSCode</strong>) è un ambiente di sviluppo completo che ci permette di creare e modificare qualsiasi codice grazie ad un supporto integrato per linguaggi come JavaScript, Typescript o Python ed estendibile grazie a tantissime estensioni.</p>
<p>Si tratta di un programma veramente facilissimo da usare e ora vedremo in modo sommativo come poter eseguire alcune azioni.</p>
<p>Innanzitutto, se si vuole lavorare in una cartella specifica, è bene aprirla tramite <strong>File</strong> -&gt; <strong>Open Folder…</strong> o semplicemente <strong>Ctrl + K, Ctrl + O</strong> eseguiti consecutivamente.</p>
<p><img src="../images/8/open-folder.png" alt="Open Folder" /></p>
<p>Nella barra laterale potremo gestire con facilità i nostri file.
Le prime due icone che appariranno in alto, a destra del nome della cartella serviranno rispettivamente per creare un file o una cartella.
Non dimentichiamoci mai di inserire anche l’estensione di un file quando lo creiamo!</p>
<p><img src="../images/8/vscode-files.png" alt="VSCode Files" /></p>
<p>Se vogliamo creare un file in una determinata cartella dovremo prima selezionarla e poi potremo cliccare il pulsante per aggiungere un file.</p>
<p>Nei file possiamo utilizzare delle shortcut da tastiera per facilitare il nostro lavoro:</p>
<ul>
<li><code style="padding: 3px 5px; background: #f0f0f0; color: #444;">Ctrl + C</code>: Copia l’intera riga attuale (dove è posizionato il cursore), o il testo selezionato;</li>
<li><code style="padding: 3px 5px; background: #f0f0f0; color: #444;">Ctrl + X</code>: Taglia l’intera riga attuale, o il testo selezionato;</li>
<li><code style="padding: 3px 5px; background: #f0f0f0; color: #444;">Alt + (Up|Down)Arrow</code>: Sposta la riga attuale sopra/sotto;</li>
<li><code style="padding: 3px 5px; background: #f0f0f0; color: #444;">Ctrl + V</code>: Incolla il testo precedentemente copiato nel punto dove è posizionato il cursore, o al posto del testo selezionato;</li>
<li><code style="padding: 3px 5px; background: #f0f0f0; color: #444;">Ctrl + Z</code>: Annulla l’ultima azione eseguita all’interno del file;</li>
<li><code style="padding: 3px 5px; background: #f0f0f0; color: #444;">Ctrl + Y</code>: Riesegue l’ultima azione annullata all’interno del file;</li>
<li><code style="padding: 3px 5px; background: #f0f0f0; color: #444;">Alt + Shift + (Up|Down)Arrow</code>: Copia/Incolla la riga attuale sopra o sotto, in modo da inserire facilmente del testo simile;</li>
<li><code style="padding: 3px 5px; background: #f0f0f0; color: #444;">Alt + Click</code>: Aggiunge un cursore in un punto per poter modificare contemporaneamente due parti del file differenti;</li>
<li><code style="padding: 3px 5px; background: #f0f0f0; color: #444;">Alt + Ctrl + (Up|Down)Arrow</code>: Aggiunge un cursore sopra/sotto quello attuale;</li>
<li><code style="padding: 3px 5px; background: #f0f0f0; color: #444;">Ctrl + A</code>: Seleziona tutto il testo;</li>
<li><code style="padding: 3px 5px; background: #f0f0f0; color: #444;">Ctrl + F</code>: Cerca nel testo la parola su cui è posizionato il cursore o il testo selezionato;</li>
<li><code style="padding: 3px 5px; background: #f0f0f0; color: #444;">Ctrl + Shift + F</code>: Cerca in tutta la cartella/workspace la parola su cui è posizionato il cursore o il testo selezionato.</li>
</ul>
<p>VSCode è distribuito in inglese ma è possibile cambiare la lingua in Italiano installando <a href="https://marketplace.visualstudio.com/items?itemName=MS-CEINTL.vscode-language-pack-it">questa estensione</a> (nota che sarà necessario riavviare VSCode successivamente).</p>
<hr />
<h3>Installazione Node.js</h3>
<p>Inoltre, abbiamo bisogno di <strong>Node.js</strong> per eseguire il nostro progetto in JavaScript.</p>
<p>Ci sono molte versioni disponibili di node ma per usare discord.js abbiamo bisogno di almeno la versione <strong>16.6.0</strong>.
Per comodità e per utilizzare le nuove funzionalità io preferisco la versione <strong>16.9.0</strong> (ultima <em>security release</em> al momento della scrittura di questo articolo) ma va bene qualsiasi altra versione, purchè sia almeno la <strong>16.6.0</strong>.</p>
<p>Qui di seguito i link ai file di installazione per la versione <strong>16.9.0</strong> in base al vostro sistema operativo:</p>
<ul>
<li><a href="https://nodejs.org/dist/v16.9.0/node-v16.9.0-x64.msi">Windows per sistemi basati su 64 bit (consigliato)</a></li>
<li><a href="https://nodejs.org/dist/v16.9.0/node-v16.9.0-x86.msi">Windows per sistemi basati su 32 bit</a></li>
<li><a href="https://nodejs.org/dist/v16.9.0/node-v16.9.0.pkg">MacOS</a></li>
</ul>
<hr />
<h3>Creazione file per gli strumenti</h3>
<p>Ora possiamo aggiungere i file di configurazione per i nostri strumenti: <strong>Typescript</strong>, <strong>ESLint</strong> e <strong>Prettier</strong>.</p>
<h4>Typescript</h4>
<p>Per attivare le funzionalità del Typescript in JavaScript, creiamo un file chiamato <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">jsconfig.json</code> all’interno della nostra cartella e inseriamo la seguente configurazione:</p>
<pre><code class="language-json"><span style="color: #444a">{</span>
    <span style="color: #444">&quot;compilerOptions&quot;</span><span style="color: #444a">:</span> <span style="color: #444a">{</span>
        <span style="color: #444">&quot;lib&quot;</span><span style="color: #444a">:</span> <span style="color: #444a">[</span><span style="color: #800;">&quot;esnext&quot;</span><span style="color: #444a">]</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;module&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;commonJS&quot;</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;moduleResolution&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;node&quot;</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;allowSyntheticDefaultImports&quot;</span><span style="color: #444a">:</span> <span style="font-weight: 700;">true</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;target&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;esnext&quot;</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;strict&quot;</span><span style="color: #444a">:</span> <span style="font-weight: 700;">true</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;esModuleInterop&quot;</span><span style="color: #444a">:</span> <span style="font-weight: 700;">true</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;skipLibCheck&quot;</span><span style="color: #444a">:</span> <span style="font-weight: 700;">true</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;forceConsistentCasingInFileNames&quot;</span><span style="color: #444a">:</span> <span style="font-weight: 700;">true</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;allowUnreachableCode&quot;</span><span style="color: #444a">:</span> <span style="font-weight: 700;">false</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;alwaysStrict&quot;</span><span style="color: #444a">:</span> <span style="font-weight: 700;">true</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;noFallthroughCasesInSwitch&quot;</span><span style="color: #444a">:</span> <span style="font-weight: 700;">true</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;noImplicitAny&quot;</span><span style="color: #444a">:</span> <span style="font-weight: 700;">true</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;noImplicitReturns&quot;</span><span style="color: #444a">:</span> <span style="font-weight: 700;">true</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;noImplicitThis&quot;</span><span style="color: #444a">:</span> <span style="font-weight: 700;">true</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;noUncheckedIndexedAccess&quot;</span><span style="color: #444a">:</span> <span style="font-weight: 700;">true</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;noUnusedLocals&quot;</span><span style="color: #444a">:</span> <span style="font-weight: 700;">true</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;noUnusedParameters&quot;</span><span style="color: #444a">:</span> <span style="font-weight: 700;">true</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;resolveJsonModule&quot;</span><span style="color: #444a">:</span> <span style="font-weight: 700;">true</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;noEmit&quot;</span><span style="color: #444a">:</span> <span style="font-weight: 700;">true</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;checkJs&quot;</span><span style="color: #444a">:</span> <span style="font-weight: 700;">true</span>
    <span style="color: #444a">}</span>
<span style="color: #444a">}</span>
</code></pre>
<p>Potete trovare tutte le opzioni nel <a href="https://code.visualstudio.com/docs/languages/jsconfig">sito ufficiale</a>.</p>
<p><strong>Nota: Se vedrete un errore nel file che indica qualcosa come <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">No inputs were found</code> non vi preoccupate, non influirà minimamente sul nostro progetto e scomparirà dopo che avremo aggiunto il nostro primo file js e riavviato VSCode.</strong></p>
<hr />
<h4>ESLint</h4>
<p>Per attivare le funzionalità di ESLint creiamo un file chiamato <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">.eslintrc.json</code> all’interno della nostra cartella e inseriamo la seguente configurazione:</p>
<pre><code class="language-json"><span style="color: #444a">{</span>
    <span style="color: #444">&quot;env&quot;</span><span style="color: #444a">:</span> <span style="color: #444a">{</span>
        <span style="color: #444">&quot;es2021&quot;</span><span style="color: #444a">:</span> <span style="font-weight: 700;">true</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;node&quot;</span><span style="color: #444a">:</span> <span style="font-weight: 700;">true</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;commonjs&quot;</span><span style="color: #444a">:</span> <span style="font-weight: 700;">true</span>
    <span style="color: #444a">}</span><span style="color: #444a">,</span>
    <span style="color: #444">&quot;extends&quot;</span><span style="color: #444a">:</span> <span style="color: #444a">[</span><span style="color: #800;">&quot;eslint:recommended&quot;</span><span style="color: #444a">]</span><span style="color: #444a">,</span>
    <span style="color: #444">&quot;parserOptions&quot;</span><span style="color: #444a">:</span> <span style="color: #444a">{</span>
        <span style="color: #444">&quot;ecmaVersion&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">2021</span>
    <span style="color: #444a">}</span><span style="color: #444a">,</span>
    <span style="color: #444">&quot;rules&quot;</span><span style="color: #444a">:</span> <span style="color: #444a">{</span>
        <span style="color: #444">&quot;curly&quot;</span><span style="color: #444a">:</span> <span style="color: #444a">[</span><span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span> <span style="color: #800;">&quot;multi&quot;</span><span style="color: #444a">]</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;dot-location&quot;</span><span style="color: #444a">:</span> <span style="color: #444a">[</span><span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span> <span style="color: #800;">&quot;property&quot;</span><span style="color: #444a">]</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;eqeqeq&quot;</span><span style="color: #444a">:</span> <span style="color: #444a">[</span><span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span> <span style="color: #800;">&quot;smart&quot;</span><span style="color: #444a">]</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;no-else-return&quot;</span><span style="color: #444a">:</span> <span style="color: #444a">[</span>
            <span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span>
            <span style="color: #444a">{</span>
                <span style="color: #444">&quot;allowElseIf&quot;</span><span style="color: #444a">:</span> <span style="font-weight: 700;">false</span>
            <span style="color: #444a">}</span>
        <span style="color: #444a">]</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;no-extra-bind&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;no-floating-decimal&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;no-implicit-coercion&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;no-multi-spaces&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;no-useless-return&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;wrap-iife&quot;</span><span style="color: #444a">:</span> <span style="color: #444a">[</span><span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span> <span style="color: #800;">&quot;inside&quot;</span><span style="color: #444a">]</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;yoda&quot;</span><span style="color: #444a">:</span> <span style="color: #444a">[</span>
            <span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span>
            <span style="color: #800;">&quot;never&quot;</span><span style="color: #444a">,</span>
            <span style="color: #444a">{</span>
                <span style="color: #444">&quot;exceptRange&quot;</span><span style="color: #444a">:</span> <span style="font-weight: 700;">true</span>
            <span style="color: #444a">}</span>
        <span style="color: #444a">]</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;no-undef-init&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;array-bracket-newline&quot;</span><span style="color: #444a">:</span> <span style="color: #444a">[</span><span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span> <span style="color: #800;">&quot;consistent&quot;</span><span style="color: #444a">]</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;array-element-newline&quot;</span><span style="color: #444a">:</span> <span style="color: #444a">[</span><span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span> <span style="color: #800;">&quot;consistent&quot;</span><span style="color: #444a">]</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;computed-property-spacing&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;new-parens&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;no-async-promise-executor&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;off&quot;</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;no-lonely-if&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;no-multiple-empty-lines&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;no-unneeded-ternary&quot;</span><span style="color: #444a">:</span> <span style="color: #444a">[</span>
            <span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span>
            <span style="color: #444a">{</span>
                <span style="color: #444">&quot;defaultAssignment&quot;</span><span style="color: #444a">:</span> <span style="font-weight: 700;">false</span>
            <span style="color: #444a">}</span>
        <span style="color: #444a">]</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;no-whitespace-before-property&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;one-var-declaration-per-line&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;operator-assignment&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;accessor-pairs&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;array-callback-return&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;arrow-body-style&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;class-methods-use-this&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;complexity&quot;</span><span style="color: #444a">:</span> <span style="color: #444a">[</span><span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span> <span style="color: #800;">10</span><span style="color: #444a">]</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;consistent-return&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;default-case-last&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;default-case&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;grouped-accessor-pairs&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;guard-for-in&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;no-alert&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;no-await-in-loop&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;no-caller&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;no-constructor-return&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;no-labels&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;no-loop-func&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;no-loss-of-precision&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;no-multi-str&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;no-new&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;no-new-func&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;no-new-wrappers&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;no-octal-escape&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;no-param-reassign&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;no-promise-executor-return&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;no-proto&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;no-return-await&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;no-self-compare&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;no-sequences&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;no-shadow&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;no-template-curly-in-string&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;no-throw-literal&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;no-unmodified-loop-condition&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;no-unreachable-loop&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;no-unsafe-optional-chaining&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;no-unused-expressions&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;no-unused-vars&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;off&quot;</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;no-use-before-define&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;no-useless-backreference&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;no-useless-call&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;no-useless-concat&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;no-useless-constructor&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;no-useless-rename&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;no-var&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;no-warning-comments&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;object-shorthand&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;prefer-arrow-callback&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;prefer-const&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;prefer-destructuring&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;prefer-numeric-literals&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;prefer-promise-reject-errors&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;prefer-regex-literals&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;prefer-rest-params&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;prefer-spread&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;prefer-template&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;require-atomic-updates&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;require-unicode-regexp&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;semi-spacing&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;semi-style&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;sort-vars&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;warn&quot;</span><span style="color: #444a">,</span>
        <span style="color: #444">&quot;symbol-description&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;warn&quot;</span>
    <span style="color: #444a">}</span>
<span style="color: #444a">}</span>
</code></pre>
<p>Questa configurazione e totalmente personalizzabile, io ho solo utilizzato delle <em>rules</em> che ci potrebbero servire ma voi potete modificarle, rimuoverle o aggiungerne di altre.
Consultate il <a href="https://eslint.org/docs/rules/">sito ufficiale</a> per la lista completa delle <em>rules</em> disponibili.</p>
<hr />
<h4>Prettier</h4>
<p>Per personalizzare le funzionalità di Prettier (disponibili di default con l’estensione), creiamo un file chiamato <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">.prettierrc.json</code> all’interno della nostra cartella e inseriamo la seguente configurazione:</p>
<pre><code class="language-json"><span style="color: #444a">{</span>
    <span style="color: #444">&quot;printWidth&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">100</span><span style="color: #444a">,</span>
    <span style="color: #444">&quot;quoteProps&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;consistent&quot;</span><span style="color: #444a">,</span>
    <span style="color: #444">&quot;arrowParens&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;always&quot;</span><span style="color: #444a">,</span>
    <span style="color: #444">&quot;bracketSpacing&quot;</span><span style="color: #444a">:</span> <span style="font-weight: 700;">true</span><span style="color: #444a">,</span>
    <span style="color: #444">&quot;embeddedLanguageFormatting&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;auto&quot;</span><span style="color: #444a">,</span>
    <span style="color: #444">&quot;endOfLine&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;crlf&quot;</span><span style="color: #444a">,</span>
    <span style="color: #444">&quot;semi&quot;</span><span style="color: #444a">:</span> <span style="font-weight: 700;">true</span><span style="color: #444a">,</span>
    <span style="color: #444">&quot;singleQuote&quot;</span><span style="color: #444a">:</span> <span style="font-weight: 700;">false</span><span style="color: #444a">,</span>
    <span style="color: #444">&quot;tabWidth&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">2</span><span style="color: #444a">,</span>
    <span style="color: #444">&quot;trailingComma&quot;</span><span style="color: #444a">:</span> <span style="color: #800;">&quot;es5&quot;</span><span style="color: #444a">,</span>
    <span style="color: #444">&quot;useTabs&quot;</span><span style="color: #444a">:</span> <span style="font-weight: 700;">true</span>
<span style="color: #444a">}</span>
</code></pre>
<p>Anche questa configurazione è personalizzabile e potete trovare tutte le opzioni nel <a href="https://prettier.io/docs/en/options.html">sito ufficiale</a>.</p>
<hr />
<h2>Creazione progetto</h2>
<p>Ora siamo praticamente pronti per iniziare a sviluppare il nostro bot!
Ci manca solo un passo: creare il nostro progetto ufficialmente nella cartella.</p>
<p>Tutti i progetti in Node.js hanno un file <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">package.json</code> che contiene i dettagli come nome, descrizione, etc…</p>
<p>Per crearlo innanzitutto apriamo un <em>terminal</em> da VSCode con <strong>Ctrl + ò</strong> oppure <strong>View</strong> -&gt; <strong>Terminal</strong>.
Ora scriviamo il comando <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">npm init</code>.</p>
<p><strong>Nota: Per maggiori dettagli riguardo l’uso di un terminal in generale potete leggere <a href="https://sitomsgaming.wordpress.com/2021/08/21/come-usare-il-prompt-dei-comandi/">questo articolo in merito</a>.</strong></p>
<p>Ci verranno richiesti alcuni dettagli, il valore mostrato tra parentesi è quello di default e verrà assegnato se skippiamo il passaggio premendo invio:</p>
<ul>
<li>nome: Il nome del progetto; <strong>non</strong> deve essere legato obbligatoriamente al nome del bot o della cartella e può utilizzare solo lettere minuscole;</li>
<li>versione: Utile se abbiamo intenzione di pubblicare il nostro progetto come modulo, può essere skippato.</li>
<li>descrizione: Una descrizione del nostro bot/progetto. Possiamo tranquillamente saltare questo passaggio;</li>
<li>entry point: Il file principale del nostro progetto. Possiamo saltare questo passaggio a meno che nn abbiamo intenzione di posizionare il codice in una sottocartella, in questo caso possiamo scrivere <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">nomeCartella/index.js</code>;</li>
<li>test command: Comando di test da eseguire con <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">npm run test</code>. Possiamo impostarlo in <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">node .</code> per eseguire più facilmente il nostro bot;</li>
<li>repository: La repository dove verrà salvato il nostro codice. Al momento non abbiamo bisogno di nessuna repository e possiamo skippare questo passaggio;</li>
<li>keywords: Parole chiave legate al progetto, utili in caso il nostro fosse un progetto pubblico su npm. Possiamo skippare questo passaggio;</li>
<li>autore: L’autore del progetto. Potete inserire il vostro nickname o tranquillamente skippare questo passaggio;</li>
<li>licenza: La licenza che utilizziamo per distribuire il nostro codice. Utile solo se il nostro codice sarà pubblico come in una repository o modulo npm. Possiamo saltare questo passaggio.</li>
</ul>
<p>Alla fine della configurazione possiamo scrivere <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">yes</code> per convalidarla e verrà creato il file <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">package.json</code> già pronto.</p>
<p><strong>Nota: Se eseguendo il comando <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">npm init</code> avete ricevuto un errore come questo: <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">npm : Termine 'npm' non riconosciuto come nome di cmdlet, funzione, programma eseguibile o file script</code>, allora vuol dire che non avete installato correttamente Node.js. Verificate che sia tutto ok e potrete sempre constatare la corretta installazione tramite il comando <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">node -v</code> che dovrebbe mostrare <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">v16.9.0</code> (o la versione da voi installata).</strong></p>
<hr />
<h2>npm</h2>
<p>Come abbiamo appena visto, per creare il nostro progetto abbiamo utilizzato il comando <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">npm init</code>, gestito da <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">npm</code>.</p>
<p><code style="padding: 3px 5px; background: #f0f0f0; color: #444;">npm</code> è un package manager, serve cioè per gestire i moduli che ci serviranno nel nostro progetto ed è preinstallato con Node.js.</p>
<p>Utilizzeremo vari comandi npm come:</p>
<ul>
<li><code style="padding: 3px 5px; background: #f0f0f0; color: #444;">npm i [nome-modulo|@autore/nome-modulo|autore/nome-modulo] [-g] [-D]</code>: Comando per installare uno o più moduli nel nostro progetto. Se il modulo da installare non è necessario nel codice in sè, possiamo utilizzare la <em>flag</em> <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">-D</code> e installarlo come <em>devDependecy</em>, ossia modulo necessario allo sviluppo del codice. Se invece vogliamo installare quel modulo globalmente, allora aggiungiamo la flag <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">-g</code>, utile per moduli che contengono degli script binari da poter essere eseguiti tramite terminal. Esempi: <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">npm i discord.js</code>, <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">npm i -g eslint</code>, <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">npm i -D @types/node</code>;</li>
<li><code style="padding: 3px 5px; background: #f0f0f0; color: #444;">npm ci</code>: Comando per installare tutti i moduli inclusi in un progetto. Funziona solo se è già presente un <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">package-lock.json</code> file, automaticamente generato da <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">npm i</code>;</li>
<li><code style="padding: 3px 5px; background: #f0f0f0; color: #444;">npm dedupe</code>: Comando per rimuovere eventuali <em>doppioni</em> nei nostri moduli. Può infatti accadere che un modulo tra quelli installati, ne richieda un altro che viene così installato a sua volta. Se tale modulo è stato installato anche da noi stessi, si creerà un doppione che può essere rimosso con questo comando;</li>
<li><code style="padding: 3px 5px; background: #f0f0f0; color: #444;">npm init [-y]</code>: Comando per iniziare un nuovo progetto npm. Chiederà vari dettagli che possono essere saltati premendo Invio, o possiamo usare la flag <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">-y</code> per saltarli automaticamente tutti.</li>
</ul>
<hr />
<h2>Installazione moduli</h2>
<p>Ci siamo quasi!
Prima di iniziare manca un’ultima cosa: installare i moduli necessari nel nostro progetto.</p>
<p>Potrebbero servirci altri moduli, ma per ora installeremo solo quelli necessari:</p>
<ol>
<li>Installiamo i moduli <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">eslint</code> e <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">prettier</code> globalmente per poterli usare anche tramite terminal: <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">npm i -g eslint prettier</code>;</li>
<li>Installiamo <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">discord.js</code> per poter interagire con Discord e <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">dotenv</code> per salvare delle variabili d’ambiente come token del bot e altro: <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">npm i discord.js dotenv</code>;</li>
<li>Installiamo localmente i moduli che ci servono per lo sviluppo del nostro bot, ossia <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">eslint</code>, <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">prettier</code> e <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">@types/node</code> che aggiungerà a typescript le definizioni degli elementi predefiniti in Node.js.</li>
</ol>
<hr />
<h2>Creazione bot</h2>
<p>Ora che abbiamo completato la configurazione del nostro ambiente di lavoro dobbiamo creare il nostro bot (se non ne avete già uno)!</p>
<p>Per farlo andiamo nel <strong><a href="https://discord.dev">Discord Developer Portal</a></strong> ed eseguiamo il login se necessario.</p>
<p>Poi rechiamoci nella sezione <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">Applications</code> e clicchiamo <strong>New Application</strong> in alto a destra.
Ci verrà chiesto il nome dell’applicazione che potremo comunque cambiare in seguito e può essere diverso da quello del bot.</p>
<p>Una volta inserito il nome clicchiamo <strong>Create</strong>.
Verremo reindirizzati in una pagina dove vedremo i dettagli della nostra applicazione e potremo aggiungere una immagine (che non dovrà obbligatoriamente coincidere con quella del bot) e una descrizione che apparirà nella sezione <strong>About Me</strong> del profilo del bot.</p>
<p>Ora andiamo nella sezione <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">Bot</code> e clicchiamo <strong>Add Bot</strong> per creare il nostro bot!
A questo punto potremo cambiare l’immagine profilo e lo username del bot (non il tag che rimarrà sempre quello).
Qui possiamo anche scegliere se rendere il nostro bot publico o privato (pubblico di default).</p>
<p><img src="../images/8/build-a-bot.png" alt="Build a Bot" /></p>
<p>Nella stessa pagina possiamo vedere una scritta <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">Token</code>: il token del nostro bot è la sua password ed è importante tenerlo sempre per sè, in quanto chiunque ne abbia accesso avrà completo accesso al nostro bot e quindi potrà uscire da tutti i server, bannare tutti i membri di tutti i server etc…
Il token è sensibile quanto il <em>client secret</em> che troviamo nella sezione <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">OAuth2</code> e che fornisce invece accesso alla tua applicazione, garantendo la possibilità di eseguire azioni a tuo nome.
Gli ID sono invece pubblichi e possono essere condivisi tranquillamente.</p>
<hr />
<h2>Invitare il bot nel nostro server</h2>
<p>Preferibilmente, potete creare un server Discord privato appositamente per testare il vostro bot e il suo funzionamento.</p>
<p>Una volta fatto, tornate nel Dev Portal, aprite la vostra applicazione (ora verrà mostrata nella lista) e recatevi nella sezione <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">OAuth2</code>.
Scendete in basso per arrivare nella sezione dove potete generare il link di invito per il vostro bot.</p>
<p>Prima di tutti sono necessari gli <em>scopi</em> che garantiremo al nostro bot, e quelli che ci serviranno sono <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">bot</code> (garantisce che il bot entrerà <em>fisicamente</em> nel server) e <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">applications.commands</code> (ci darà il permesso per l’aggiunta di slash commands nel server):</p>
<p><img src="../images/8/scopes.png" alt="Scopes" /></p>
<p>Scendendo ancora più in basso potremo scegliere i permessi da aggiungere al nostro bot; selezioniamo <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">Administrator</code> per aggiungerli tutti o scegliete quelli che fanno per voi:</p>
<p><img src="../images/8/bot-permissions.png" alt="Bot Permissions" /></p>
<p>Ora torniamo nella sezione <strong>Scopes</strong> e copiamo l’URL in basso, che sarà l’invito del bot, poi incolliamolo nella barra di ricerca del nostro browser e scegliamo il server dove vogliamo aggiungere il nostro bot (avrete probabilmente già fatto questa procedura altre volte).</p>
<p>Una volta autorizzato torniamo su Discord e vedremo che nel nostro server è apparso il nuovo bot (tristemente offline :/)!</p>
<hr />
<h2>index.js</h2>
<p>Ce l’abbiamo fatta, finalmente possiamo creare il nostro primo file in JavaScript ed iniziare a scrivere il codice.</p>
<p>Creiamo un file chiamato <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">index.js</code> nella cartella del nostro progetto e poi assicuriamoci di riavviare VSCode in modo che rilevi il nostro nuovo progetto con i vari file di configurazione.</p>
<p>Ora, per testare che tutte le funzioni attivate funzionino correttamente incollate il seguente codice nel file appena creato:</p>
<!-- prettier-ignore-start -->
```js
const{Client}=require('discord.js');const client=new Client;client
```
<!-- prettier-ignore-end -->
<p>Se tutto è stato configurato correttamente dovreste:</p>
<ul>
<li><p>Vedere il codice immediatamente formattato nel seguente modo:</p>
<pre><code style="background: #f0f0f0; color: #444; padding: 1em; display: block; overflow-wrap: break-word; white-space: pre-wrap;"><span style="font-weight: 700;">const</span> { <span style="color: #800; font-weight: 700;">Client</span> } = <span style="color: #397300;">require</span>(<span style="color: #800;">&quot;discord.js&quot;</span>);
<span style="font-weight: 700;">const</span> client = <span style="font-weight: 700;">new</span> <span style="color: #800; font-weight: 700;">Client</span>();
client;
</code></pre></li>
<li><p>Vedere <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">new Client()</code> sottolineato di rosso con l’errore seguente (o lo stesso ma tradotto in caso abbiate modificato la lingua): <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">Expected 1 arguments, but got 0</code>;</p></li>
<li><p>Vedere l’ultimo <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">client</code> sottolineato di giallo con l’errore seguente: <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">Expected an assignment or function call and instead saw an expression</code>;</p></li>
</ul>
<p>Se tutto questo accade, allora la nostra configurazione è andata a buon fine e possiamo iniziare a scrivere il codice del bot; in caso contrario ricontrollate di aver eseguito correttamente la procedura descritta per ogni strumento considerando che il primo punto dell’elenco di sopra riguarda <strong>Prettier</strong>, il secondo <strong>Typescript</strong> e il terzo <strong>ESLint</strong>.</p>
