<h1>IntelliSense &amp; Typescript</h1>
<p>In questo primo articolo iniziamo a vedere gli strumenti che utilizzeremo nel nostro progetto.
Il primo strumento è l’<strong><a href="https://code.visualstudio.com/docs/editor/intellisense">IntelliSense</a></strong>, che, con la potenza del <strong><a href="https://www.typescriptlang.org/">Typescript</a></strong>, ci fornirà un aiuto enorme durante lo sviluppo del nostro bot</p>
<p>Di seguito è riportata un’immagine ufficiale riguardo l’uso di questa funzione.</p>
<p><img src="/images/1/IntelliSense.gif" alt="IntelliSense" /></p>
<h2>Cos’è l’<strong>IntelliSense</strong>?</h2>
<p><strong>IntelliSense</strong> è una funzione di <strong>Visual Studio Code</strong> che permette di ricevere suggerimmenti durante la scrittura del codice, nel nostro caso, <strong>Javascript</strong>.</p>
<p>Questa funzione ci permetterà di eseguire alcune azioni facilmente, come:</p>
<ul>
<li><strong>Completare il codice grazie a suggerimenti, semplicemente cliccando &quot;invio&quot;:</strong></li>
</ul>
<p><img src="/images/1/AutoCompletion.gif" alt="AutoCompletion" /></p>
<ul>
<li><strong>Avere info dettagliate riguardo i parametri di alcune funzioni:</strong></li>
</ul>
<p><img src="/images/1/ParamsInfo.png" alt="ParametersInfo" /></p>
<ul>
<li><strong>Consultare una lista dei metodi e dei valori legati ad un <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">object</code> con le loro informazioni per scegliere quello di cui abbiamo bisogno:</strong></li>
</ul>
<p><img src="/images/1/MethodsList.gif" alt="MethodsList" /></p>
<h2>Cos’è Typescript?</h2>
<p><strong>Intellisense</strong> utilizza strumenti specifici per ogni linguaggio di programmazione per fornirci i suoi servizi.
Visual Studio Code ha un supporto nativo per il Javascript grazie all’aiuto del <strong>Typescript</strong>.</p>
<blockquote>
<p><strong>Typescript</strong> è un linguaggio di programmazione che si basa sul JavaScript, aggiungendo definizioni di tipo (<em>types</em>).</p>
</blockquote>
<blockquote>
<p>I <em>types</em> forniscono un modo per descrivere la forma di un oggetto, fornendo una migliore documentazione e consentendo a TypeScript di verificare che il codice funzioni correttamente.</p>
</blockquote>
<p>Ancora confusi? Semplicemente, Typescript controlla che il vostro codice sia esatto, non soltanto dal punto di vista sintattico, grazie ai <em>types</em>.
Inoltre, nel caso commettiate qualche errore, ve lo comunicherà prima di eseguire il codice, addirittura direttamente lo scriviamo, grazie al supporto nativo di Visual Studio Code.</p>
<h3>Cosa sono i <em>types</em>?</h3>
<p>I <em>types</em> sono descrizioni di qualsiasi cosa in Javascript.
Pensate a quando usiamo un semplice <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">console.log()</code> nel nostro codice: abbiamo utilizzato un oggetto chiamato <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">console</code> ed eseguito la funzione <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">log</code>.
Grazie a questi <em>types</em>, Typescript sa che <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">console</code> ha una certa funzione (o <em>metodo</em>) chiamata <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">log</code> e ci dirà che il nostro codice è esatto.
Se invece utilizzassimo una funzione come <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">console.send()</code>, che non esiste, ci mostrerà un errore:</p>
<p><img src="/images/1/ConsoleSend.png" alt="ConsoleSend" /></p>
<h3>Funzioni del Typescript</h3>
<p>Typescript può quindi aiutarci a non sbagliare mostrandoci degli errori direttamente nel nostro editor.
Nasce come un linguaggio di programmazione, ma noi utilizzeremo la sua potenza con il Javascript in Visual Studio Code.
Ora osserviamo quali sono le sue principali funzioni:</p>
<ul>
<li><strong>Controllare che, in generale, il codice non includa parti che indurrebbero ad un errore durante l’esecuzione, come:</strong></li>
</ul>
<p><img src="/images/1/NoUndef.png" alt="NoUndef" /></p>
<ul>
<li><strong>Includere un fix veloce per errori semplici, come quello nell’immagine precedente:</strong></li>
</ul>
<p><img src="/images/1/FastFix.png" alt="FastFix" /></p>
<ul>
<li><strong>Mantenere sempre lo stesso <em>type</em> per ogni elemento, in modo da essere sempre a conoscenza di cosa un elemento rappresenti:</strong></li>
</ul>
<p><img src="/images/1/VarAssign.png" alt="VarAssign" /></p>
<ul>
<li><strong>Assicurare che tutti i <em>types</em> vengano utilizzati propriamente:</strong></li>
</ul>
<p><img src="/images/1/ArrayDivision.png" alt="ArrayDivision" /></p>
<ul>
<li><strong>Assicurare che tutte le funzioni vengano chiamate con i parametri corretti:</strong></li>
</ul>
<p><img src="/images/1/FuncParams.png" alt="FuncParams" /></p>
<h3>Assegnare <em>types</em> manualmente</h3>
<p>Ovviamente, Typescript non può sempre immaginare che <em>types</em> vogliamo assegnare ad alcuni elementi, perciò dovremo dirglielo noi!
Per farlo utilizzeremo i <strong><a href="https://www.typescriptlang.org/docs/handbook/jsdoc-supported-types.html">JSDoc</a></strong>.
Prendiamo il seguente esempio di codice:</p>
<pre><code style="background: #f0f0f0; color: #444; padding: 1em; overflow-x: auto; display: block;"><span style="font-weight: 700;">function</span> <span style="color: #800; font-weight: 700;">run</span>(<span class="hljs-params">message, args</span>) {
    <span style="color: #bc6060;">console</span>.<span style="color: #800; font-weight: 700;">log</span>(message.<span class="hljs-property">auhtor</span>);
    <span style="font-weight: 700;">return</span> args.<span style="color: #800; font-weight: 700;">join</span>(<span style="color: #800;">&quot; &quot;</span>);
}
</code></pre>
<p>In questo caso Typescript non sa quali sono i <em>types</em> di <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">message</code> e <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">args</code> perciò non sarà in grado di rilevare eventuali errori, come <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">message.auhtor</code> che non esiste.
Per risolvere questo problema seguiamo la seguente procedura:</p>
<ol>
<li><strong>Spostiamo il cursore su uno dei parametri che abbiamo scritto e clicchiamo su <em>Quick Fix…</em>:</strong></li>
</ol>
<p><img src="/images/1/ImplicitType.png" alt="ImplicitType" /></p>
<ol start="2">
<li><strong>Clicchiamo su <em>Infer all types from usage</em>:</strong></li>
</ol>
<p><img src="/images/1/InferType.png" alt="InferType" /></p>
<ol start="3">
<li><strong>A questo punto verrà creato un JSDoc e Typescript proverà ad indovinare i <em>types</em> dei parametri:</strong></li>
</ol>
<p><img src="/images/1/JSDoc.png" alt="JSDoc" /></p>
<ol start="4">
<li><strong>Ora non ci resta che controllare e sostituire i <em>types</em> nelle parentesi graffe con quelli corretti.</strong>
<strong><code style="padding: 3px 5px; background: #f0f0f0; color: #444;">message</code> ha un <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">type</code> creato da discord.js chiamato <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">Message</code>, perciò ci basterà scrivere questo nome e, quando apparirà nella lista dei suggerimenti, cliccare &quot;Invio&quot;:</strong></li>
</ol>
<p><img src="/images/1/CustomTypes.png" alt="CustomTypes" /></p>
<p>Ora Typescript potrà finalmente aiutarci anche all’interno della funzione!
Il codice precedente sarà adesso come il seguente e ci avvertirà dell’errore in <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">message.auhtor</code>:</p>
<pre><code style="background: #f0f0f0; color: #444; padding: 1em; overflow-x: auto; display: block;"><span style="font-weight: 700;">const</span> { <span style="color: #800; font-weight: 700;">Message</span> } = <span style="color: #397300;">require</span>(<span style="color: #800;">&quot;discord.js&quot;</span>);

<span style="color: #888">/**
 * <span style="font-weight: 700;">@param</span> {<span style="color: #800;">Message</span>} <span style="color: #bc6060;">message</span>
 * <span style="font-weight: 700;">@param</span> {<span style="color: #800;">string[]</span>} <span style="color: #bc6060;">args</span>
 */</span>
<span style="font-weight: 700;">function</span> <span style="color: #800; font-weight: 700;">run</span>(<span class="hljs-params">message, args</span>) {
    <span style="color: #bc6060;">console</span>.<span style="color: #800; font-weight: 700;">log</span>(message.<span class="hljs-property">auhtor</span>);
    <span style="font-weight: 700;">return</span> args.<span style="color: #800; font-weight: 700;">join</span>(<span style="color: #800;">&quot; &quot;</span>);
}
</code></pre>
<h3>Lista dei <em>types</em></h3>
<p><strong>Nota: Questa sezione include riferimenti a elementi Javascript non ancora trattati nella guida come <em>array</em> o <em>Promise</em>.</strong></p>
<p>Qui di seguito è riportata una lista dei vari <em>types</em> predefiniti che possono essere utilizzati per descrivere i nostri elementi.
Se volete utilizzare un <em>type</em> esterno, cioè creato da un altro package, ricordate di utilizzare la procedura descritta nel punto 4 della <a href="#assegnare-types-manualmente">sezione precedente</a>.</p>
<ul>
<li><code style="padding: 3px 5px; background: #f0f0f0; color: #444;">any</code>: Può essere qualsiasi cosa e disabilita tutti i controlli su di lui, sconsigliato da usare.
Es. <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">1</code>, <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">undefined</code>;</li>
<li><code style="padding: 3px 5px; background: #f0f0f0; color: #444;">bigint</code>: Indica un numero molto grande. Es. <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">30n</code>;</li>
<li><code style="padding: 3px 5px; background: #f0f0f0; color: #444;">boolean</code>: Sì o no. Es. <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">true</code>, <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">false</code>;</li>
<li><code style="padding: 3px 5px; background: #f0f0f0; color: #444;">null</code>: Nulla, ma nella forma Javascript. Es. <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">null</code>;</li>
<li><code style="padding: 3px 5px; background: #f0f0f0; color: #444;">number</code>: Indica un numero qualsiasi. Es. <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">15</code>, <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">123.4</code>;</li>
<li><code style="padding: 3px 5px; background: #f0f0f0; color: #444;">string</code>: Indica una stringa Javascript. Es. <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">&quot;Sus&quot;</code>, <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">&quot;&quot;</code>;</li>
<li><code style="padding: 3px 5px; background: #f0f0f0; color: #444;">symbol</code>: Indica un simbolo univoco in Javascritp. Es. <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">Symbol(&quot;Sus&quot;)</code>;</li>
<li><code style="padding: 3px 5px; background: #f0f0f0; color: #444;">undefined</code>: Nulla, qualcosa che non esiste. Es. <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">undefined</code>;</li>
<li><code style="padding: 3px 5px; background: #f0f0f0; color: #444;">unknown</code>: Può essere qualsiasi cosa e richiede di controllare manualmente che <em>type</em> abbia prima di eseguire qualsiasi azione con esso.
Es. <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">&quot;Sus&quot;</code>, <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">null</code>;</li>
<li><code style="padding: 3px 5px; background: #f0f0f0; color: #444;">void</code>: Di nuovo nulla, ma utilizzato nelle funzioni che non usano nessun <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">return</code>;</li>
<li><code style="padding: 3px 5px; background: #f0f0f0; color: #444;">x[]</code>: Un <em>array</em> dove tutti gli elementi hanno come tipo <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">x</code>. Es. <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">string[]</code>, <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">unknown[]</code>;</li>
<li><code style="padding: 3px 5px; background: #f0f0f0; color: #444;">Promise&lt;x&gt;</code>: Una <em>promessa</em> che restituirà un elemento di tipo <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">x</code> quando verrà <em>esaudita</em>.
Es. <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">Promise&lt;string&gt;</code>, <code style="padding: 3px 5px; background: #f0f0f0; color: #444;">Promise&lt;unknown&gt;</code>.</li>
</ul>
<h2>File configurazione</h2>
<p>Le funzioni descritte in questo articolo richiedono un file di configurazione per essere attivate, chiamato <strong><a href="https://code.visualstudio.com/docs/languages/jsconfig"><code style="padding: 3px 5px; background: #f0f0f0; color: #444;">jsconfig.json</code></a></strong>.
Nel progetto del nostro bot utilizzeremo <a href="/jsconfig.json">questa configurazione</a>.</p>
<h2>Estensioni</h2>
<p>Per poter attivare e potenziare le funzioni descritte in questo articolo, direttamente in Visual Studio Code, avremo bisogno delle seguenti estensioni:</p>
<ul>
<li><a href="https://marketplace.visualstudio.com/items?itemName=aaron-bond.better-comments">Better Comments</a>;</li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=christian-kohler.npm-intellisense">npm Intellisense</a>;</li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=VisualStudioExptTeam.vscodeintellicode">Visual Studio IntelliCode</a>.</li>
</ul>
